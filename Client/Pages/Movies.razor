@page "/movies"
@using MovieJournal.Shared;
@inject HttpClient Http;

<PageTitle>Movies</PageTitle>
<h3>Movies</h3>
<table class="table">
  <thead>
    <tr>
      <th>Id</th>
      <th>Title</th>
      <th>Status</th>
      <th>Genre</th>
      <th>Year</th>
      <th>Stars</th>
      <th>Review</th>
    </tr>
  </thead>
  <tbody>
    @foreach (var movie in movies)
        {
            <tr>
              <td>@movie.Id</td>
              <td>@movie.Title</td>
              <td>@movie.Status</td>
              <td>@movie.Genre</td>
              <td>@movie.Year</td>
              <td>@movie.Stars</td>
              <td>@movie.Review</td>
            </tr>
        }
    </tbody>
</table>

@code {
    private List<Movie>? movies = new List<Movie>();

    protected override async Task OnInitializedAsync()
    {
        movies = await Http.GetFromJsonAsync<List<Movie>>("api/movie");
    }
}
