@page "/movies"
@using MovieJournal.Client.Services.MovieService;
@inject IMovieService MovieService;
@inject NavigationManager NavigationManager;

<PageTitle>Movies</PageTitle>
<h3>Movies</h3>
<table class="table">
  <thead>
    <tr>
      <th>Id</th>
      <th>Title</th>
      <th>Status</th>
      <th>Genre</th>
      <th>Year</th>
      <th>Stars</th>
      <th>Review</th>
    </tr>
  </thead>
  <tbody>
    @foreach (var movie in MovieService.Movies)
        {
            <tr>
              <td>@movie.Id</td>
              <td>@movie.Title</td>
              <td>@movie.Status</td>
              <td>@movie.Genre</td>
              <td>@movie.Year</td>
              <td>@movie.Stars</td>
              <td>@movie.Review</td>
              <td>
                <button class="btn btn-primary" @onclick="() => ShowMovie(movie.Id)"><i class="oi oi-pencil"/></button>
              </td>
            </tr>
        }
    </tbody>
</table>
<button class="btn btn-primary" @onclick="CreateNewMovie">Create New Movie</button>

@code {
    protected override async Task OnInitializedAsync()
    {
        await MovieService.GetMovies();
    }

    void ShowMovie(int id)
    {
        NavigationManager.NavigateTo($"movie/{id}");
    }

    void CreateNewMovie()
    {
        NavigationManager.NavigateTo("movie");
    }
}
